# This little script is intended to *ease* the use
# of the channel service interface "X". It works pretty
# much like the /help command, except that it's called
# /xhelp :)
#
# NB. Most aliases are X's commands prefixed by 'X'.
#
# Feel free to distribute this package to your friends, but
# just make sure my name stays on it. I want to make sure
# people know where to send their complaints ;)
#
# seks <intru@step.polymtl.ca>
# 95/07/13
# update 95/12/11

^SET DISPLAY OFF
SET EXEC_PROTECTION OFF
SET NOVICE OFF

ASSIGN XHELP_DIR ~/XHELP
#ASSIGN XHELP_DIR /usr/local/lib/irc/XHELP
ASSIGN CAT /bin/cat

ALIAS XX //QUOTE PRIVMSG X@CHANNELS.UNDERNET.ORG :$*
ALIAS WW //QUOTE PRIVMSG W@CHANNELS2.UNDERNET.ORG :$*

ALIAS XACCESS XX ACCESS
ALIAS XADDCHAN XX ADDCHAN
ALIAS XADDUSER XX ADDUSER
ALIAS XBAN XX BAN
ALIAS XBANLIST XX BANLIST
ALIAS XCHANINFO XX CHANINFO
ALIAS XCLEARMODE XX CLEARMODE
ALIAS XCOMMANDS XX SHOWCOMMANDS
ALIAS XDEOP XX DEOP
ALIAS XINFO XHELP INFO
ALIAS XINVITE XX INVITE
ALIAS XJOIN XX JOIN
ALIAS XKICK XX KICK
ALIAS XLBANLIST XX LBANLIST
ALIAS XMAP XX MAP
ALIAS XMODINFO XX MODINFO
ALIAS XMOTD XX MOTD
ALIAS XNEWPASS XX NEWPASS
ALIAS XOP XX OP
ALIAS XPART XX PART
ALIAS XPASS XX PASS
ALIAS XREMCHAN XX REMCHAN
ALIAS XREMUSER XX REMUSER
ALIAS XSET XX SET
ALIAS XSHOWCOMMANDS XX SHOWCOMMANDS
ALIAS XSTATUS XX STATUS
ALIAS XSUSPEND XX SUSPEND
ALIAS XTOPIC XX TOPIC
ALIAS XUNBAN XX UNBAN
ALIAS XUNSUSPEND XX UNSUSPEND

ALIAS WACCESS WW ACCESS
ALIAS WADDCHAN WW ADDCHAN
ALIAS WADDUSER WW ADDUSER
ALIAS WBAN WW BAN
ALIAS WBANLIST WW BANLIST
ALIAS WCHANINFO WW CHANINFO
ALIAS WCLEARMODE WW CLEARMODE
ALIAS WCOMMANDS WW SHOWCOMMANDS
ALIAS WDEOP WW DEOP
ALIAS WINFO WHELP INFO
ALIAS WINVITE WW INVITE
ALIAS WJOIN WW JOIN
ALIAS WKICK WW KICK
ALIAS WLBANLIST WW LBANLIST
ALIAS WMAP WW MAP
ALIAS WMODINFO WW MODINFO
ALIAS WMOTD WW MOTD
ALIAS WNEWPASS WW NEWPASS
ALIAS WOP WW OP
ALIAS WPART WW PART
ALIAS WPASS WW PASS
ALIAS WREMCHAN WW REMCHAN
ALIAS WREMUSER WW REMUSER
ALIAS WSET WW SET
ALIAS WSHOWCOMMANDS WW SHOWCOMMANDS
ALIAS WSTATUS WW STATUS
ALIAS WSUSPEND WW SUSPEND
ALIAS WTOPIC WW TOPIC
ALIAS WUNBAN WW UNBAN
ALIAS WUNSUSPEND WW UNSUSPEND

ALIAS XHELP
{
  @_COUNT=0
  @_HELPFILES=[HELPLIST ACCESS DEFCHAN ADDUSER BAN BAN CHANINFO OP HELP INVITE INFO JOIN KICK BAN MAP MOTD OP JOIN PASSWORD DEFCHAN ADDUSER SET SHOWCOMMANDS SHOWIGNORE SUSPEND SUSPEND TOPIC BAN CLEARMODE]
  @_HELPCOMMS=[XACCESS XADDCHAN XADDUSER XBAN XBANLIST XCHANINFO XDEOP XHELP XINVITE XINFO XJOIN XKICK XLBANLIST XMAP XMOTD XOP XPART XPASS XREMCHAN XREMUSER XSET XSHOWCOMMANDS XSHOWIGNORE XSUSPEND XUNSUSPEND XTOPIC XUNBAN XCLEARMODE]
  ^SET HOLD_MODE ON
  ^ON ^EXEC XHELP {
    @_COUNT=(_COUNT+1)
    IF ( _COUNT == 22 )
    {
      INPUT "More? " @_COUNT=0
    }
    ECHO *** $1-
  }
  ^ON ^EXEC_EXIT XHELP {
    ^ON ^EXIT_EXIT -XHELP
    ^ON ^EXEC -XHELP
    ^ASSIGN -_COUNT
    ^ASSIGN -_HELPFILES
    ^ASSIGN -_HELPCOMMS
    ^SET HOLD_MODE OFF
    INPUT "XHelp? " IF ( [$0] ) { XHELP $* }
  }

  IF ( [$0] )
  {
    ECHO ***  HELP on $[55]0
    IF ( [$[1]0] == [X] )
    {
      EXEC -NAME XHELP $CAT $XHELP_DIR/$WORD($RMATCH($0 $_HELPCOMMS) $_HELPFILES)
    }
    {
      EXEC -NAME XHELP $CAT $XHELP_DIR/$WORD($RMATCH(X$0 $_HELPCOMMS) $_HELPFILES)
    }
  }
  {
    EXEC -NAME XHELP $CAT $XHELP_DIR/HELPLIST
  }
}

ALIAS WHELP
{
  @_COUNT=0
  @_HELPFILES=[HELPLIST ACCESS DEFCHAN ADDUSER BAN BAN CHANINFO OP HELP INVITE INFO JOIN KICK BAN MAP MOTD OP JOIN PASSWORD DEFCHAN ADDUSER SET SHOWCOMMANDS SHOWIGNORE SUSPEND SUSPEND TOPIC BAN CLEARMODE]
  @_HELPCOMMS=[WACCESS WADDCHAN WADDUSER WBAN WBANLIST WCHANINFO WDEOP WHELP WINVITE WINFO WJOIN WKICK WLBANLIST WMAP WMOTD WOP WPART WPASS WREMCHAN WREMUSER WSET WSHOWCOMMANDS WSHOWIGNORE WSUSPEND WUNSUSPEND WTOPIC WUNBAN WCLEARMODE]
  ^SET HOLD_MODE ON
  ^ON ^EXEC XHELP {
    @_COUNT=(_COUNT+1)
    IF ( _COUNT == 22 )
    {
      INPUT "More? " @_COUNT=0
    }
    ECHO *** $1-
  }
  ^ON ^EXEC_EXIT WHELP {
    ^ON ^EXIT_EXIT -WHELP
    ^ON ^EXEC -WHELP
    ^ASSIGN -_COUNT
    ^ASSIGN -_HELPFILES
    ^ASSIGN -_HELPCOMMS
    ^SET HOLD_MODE OFF
    INPUT "WHelp? " IF ( [$0] ) { WHELP $* }
  }

  IF ( [$0] )
  {
    ECHO ***  HELP on $[55]0
    IF ( [$[1]0] == [W] )
    {
      EXEC -NAME WHELP $CAT $XHELP_DIR/$WORD($RMATCH($0 $_HELPCOMMS) $_HELPFILES)
    }
    {
      EXEC -NAME WHELP $CAT $XHELP_DIR/$WORD($RMATCH(W$0 $_HELPCOMMS) $_HELPFILES)
    }
  }
  {
    EXEC -NAME XHELP $CAT $XHELP_DIR/HELPLIST
  }
}



ON ^NOTICE X ECHO X** $1-
ON ^NOTICE W ECHO W** $1-
#ON ^SERVER_NOTICE "% % % % HACK% UWORLD%.UNDERNET.ORG MODE #% +o X*" ECHO *** X reop on $7
#ON ^SERVER_NOTICE "% % % % HACK% UWORLD%.UNDERNET.ORG MODE #% +o W*" ECHO *** W reop on $7
ON ^401 "% X@CHANNELS%.UNDERNET.ORG *" ECHO *** X is unreachable at the moment
ON ^401 "% W@CHANNELS%.UNDERNET.ORG *" ECHO *** W is unreachable at the moment

^SET DISPLAY ON
ECHO *** X script loaded! (try /xhelp)
